# Weather App

Это простое веб-приложение, которое позволяет пользователю ввести название города и получить прогноз погоды для этого города. Приложение построено с использованием **FastAPI** и использует **Open-Meteo API** для получения данных о погоде. 
#### **Функционал приложения построен на Английском языке!**


## Используемые технологии

- **FastAPI**: Веб-фреймворк для построения API.
- **Uvicorn**: ASGI-сервер для запуска FastAPI-приложений.
- **Jinja2**: Шаблонизатор для рендеринга HTML-шаблонов.
- **SQLAlchemy**: ORM для работы с базой данных и хранения истории поиска.
- **SQLite**: База данных для хранения истории поиска.
- **Docker**: Используется для контейнеризации приложения.
- **pytest**: Фреймворк для тестирования.

## Реализованный функционал

- **Прогноз погоды**: Пользователи могут ввести название города, и приложение покажет прогноз погоды для этого города, включая температуру и погодные иконки (солнце, дождь и т. д.).
- **Автозаполнение**: При вводе названия города показываются подсказки с возможными городами, используя **Open-Meteo Geocoding API**.
- **История поиска**: Приложение запоминает последний город, для которого был прогноз.
- **API для статистики поиска**: Эндпоинт, который показывает количество поисков для каждого города (История поиска).
- **Докеризация**: Приложение и тесты контейнеризованы с помощью Docker, что упрощает развертывание и тестирование.
- **Тесты**: Написаны юнит-тесты и интеграционные тесты для проверки основной функциональности приложения, что обеспечивает корректность и стабильность.
- **Логгер**: Подключен простейший Логгер.

## Как запустить

### Требования

- Установлен **Docker**. Инструкции по установке можно найти на [официальном сайте Docker](https://www.docker.com/get-started).
- Установлен **Docker Compose** для управления многоконтейнерными приложениями.

### Шаги для запуска приложения

1. **Клонировать репозиторий:**

    ```bash
    git clone https://github.com/Exslayder/weather_app.git
    cd weather_app
    ```

2. **Построить Docker контейнеры:**

    ```bash
    docker-compose build
    ```

3. **Запустить приложение:**

    Чтобы запустить веб-приложение:

    ```bash
    docker-compose up -d app
    ```

    Это запустит FastAPI приложение в фоновом режиме. Приложение будет доступно по адресу `http://localhost:8000`.

4. **Запуск тестов:**

    Если вы хотите запустить тесты, используйте:

    ```bash
    docker-compose run --rm tests
    ```

    **Покрытие тестами**: Тесты охватывают функциональность получения погоды, истории поиска городов и работы API.

### Эндпоинты API

- **GET /weather**: Получить прогноз погоды для указанного города.
    - Параметр запроса: `city` (название города)
    - Пример: `http://localhost:8000/weather?city=London`

- **GET /history**: Получить историю поиска пользователя.
    - Показывает список городов, которые были ранее найдены, с количеством их запросов.
    - Пример: `http://localhost:8000/history`

- **GET /api/stats**: Статистика, сколько раз каждый город был поискан.
    - Пример: `http://localhost:8000/api/stats`

### Как использовать веб-приложение

1. Откройте браузер и перейдите по адресу `http://localhost:8000`.
2. Введите название города в строку поиска, чтобы получить прогноз погоды.
3. Вы также увидите ранее искомый город и сможете снова получить прогноз для него.
4. История поиска сохраняется локально для каждого пользователя.

---

### Заключение

Этот проект демонстрирует создание приложения для прогноза погоды с использованием FastAPI, контейнеризацию с помощью Docker и написание тестов с использованием pytest. Приложение также отслеживает историю поиска и предлагает автозаполнение при вводе городов.

Вы можете клонировать или модифицировать этот репозиторий по вашему усмотрению.

---

### Лицензия

Этот проект лицензируется под MIT License — подробности в файле [LICENSE](LICENSE).
